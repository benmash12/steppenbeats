function userReg(){var e=$("#regfn").val(),r=$("#regem").val(),a=$("#regpw").val(),s=$("#regcpw").val(),o=[];""!=e&&""!=r&&""!=a&&""!=s||o.push("All fields with * are required.");""==e||/^[A-Z][a-z'\-]+[\s]+[A-Z][a-z'\-]+$/i.test(e)||/^[A-Z][a-z'\-]+[\s]+[A-Z][a-z'\-]+[\s]+[A-Z][a-z'\-]+$/i.test(e)||o.push("Invalid fullname supplied. Please follow instructions.");""==r||/^(?:[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i.test(r)||o.push("Invalid email address entered.");var n;""==a||/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d!$%@#£€*?&]{6,30}$/.test(a)||o.push("Weak Password! password must be between 6 to 30 characters long and must contain at least one letter and one number. And must not contain spaces."),""!=s&&s!=a&&o.push("Confirm Password must be the same as password, they must match."),0<o.length?Err(o.join("<br><br>")):(e=e.match(/\b[\w'\-]+\b/gi),n=[],e.forEach(function(e){e=e.toLowerCase().split("");e[0]=e[0].toUpperCase(),n.push(e.join(""))}),a={fn:e=n.join(" "),em:r,pw:a},preloader(1),socket.emit("user_register",a,function(e){preloader(0),e.succ?(Succ("Congratulations! Your registration was successful and a verification link has been sent to your email. Please check your inbox, or spam folder and click on the link in the email we sent to verify your account. You cannot login until you verify your account."),$("#regfn").val(""),$("#regem").val(""),$("#regpw").val(""),$("#regcpw").val("")):e.message?Err(e.message):Err("An unknown error was encountered! Please try again...")}))}function userLogin(){var e=$("#logem").val(),r=$("#logpw").val(),a=[];""!=e&&""!=e.replace(/[\s]/g,"")||a.push("Email is required!");var s;""==e||/^(?:[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i.test(e)||a.push("Invalid email address entered!"),""!=r&&""!=r.replace(/[\s]/g,"")||a.push("Password is required!"),s=$("#saveii").is(":checked")?"yes":"no",0<a.length?Err(a.join("<br><br>")):((a={}).email=e,a.password=r,a._csrf=csrfx,a.save=s,preloader(1),$.ajax({type:"post",url:"/user/login",data:a,error:function(){preloader(0),Err("Could not establish a connection with the server.")},success:function(e){e.err?(preloader(0),Err(e.message)):e.succ?window.location="/account/dashboard/?u="+e.user:(preloader(0),Err("An unrecognized error occured"))}}))}function forgotpass(){var r=/^(?:[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i;bootbox.prompt({title:'<p class="panP light-black">Type in the email you registered with</p>',inputType:"text",required:!0,callback:function(e){e&&(r.test(e)?(preloader(1),socket.emit("forgot_password",e,function(e){preloader(0),e.succ?Succ("If your email is registered on this site and you have verified your account, you will receive a password reset link within five minutes. Please check your inbox, including your spam folder."):e.message?Err(e.message):Err("An unrecognized error occured")})):Err("Invalid email"))}})}function forg(){var e=$("#forpw").val(),r=$("#forcpw").val(),a=$("#email").val(),s=$("#ref").val(),o=[];""!=e&&""!=r||o.push("All fields are required");""==e||/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d!$%@#£€*?&]{6,30}$/.test(e)||o.push("Weak Password!  must be between 6 to 30 characters long and must contain at least one letter and one number. and must not contain spaces."),""!=r&&r!=e&&o.push("Passwords do not match! Confirm New Password must be the same as New Password."),0<o.length?Err(o.join("<br><br>")):((o={}).pw=e,o.em=a,o.ref=s,o._csrf=csrfx,preloader(1),$.ajax({type:"post",url:"/reset-password",data:o,error:function(){preloader(0),Err("A connection to the server could not be established.")},success:function(e){e.succ?(window.location="/account/sign-in",$("#forpw,#forcpw").val("")):(preloader(0),e.message?Err(e.message):Err("An unrecognized error occured"))}}))}function adminLogin(){var e,r=$("#logun").val(),a=$("#logpw").val(),s=[];""!=r&&""!=r.replace(/[\s]/g,"")||s.push("Username is required!"),""!=a&&""!=a.replace(/[\s]/g,"")||s.push("Password is required!"),e=$("#saveii").is(":checked")?"yes":"no",0<s.length?Err(s.join(".<br><br>")):((s={}).username=r,s.password=a,s._csrf=""+csrfx,s.save=e,preloader(1),$.ajax({type:"post",url:"/admin",data:s,error:function(){preloader(0),Err("a server error occurred. please try again")},success:function(e){e.err?(preloader(0),Err(e.message)):e.succ?window.location="/admin":(preloader(0),Err("an unrecognized error occurred. please try again"))}}))}